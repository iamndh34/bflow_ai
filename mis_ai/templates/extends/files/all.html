{% load i18n string_utils %}

{% random_str 10 True as id_modal %}

<div
        class="card p-1 dad-file-control-group"
        {% if id %} id="{{ id }}" {% endif %}
        data-url="{% url 'AttachmentUpload' %}"
        data-url-document-type="{% url 'DocumentTypeConfigListAPI' %}"
        data-url-content-group="{% url 'ContentGroupListAPI' %}"
        data-msg-upload-exception="{% trans 'Has exception in upload progress' %}"
        data-msg-skip-exist-file="{% trans 'Skip add exist file' %}"
        data-msg-description-file="{% trans 'Descriptions of file' %}"
        data-msg-attribute-file="{% trans 'Attributes of file' %}"
>
    <div
            class="dm-uploader w-100"
            style="{% if is_show_dad == False %} display: none; {% endif %}"
    >
        <div class="row mx-3 my-2 py-10 dm-uploader-text">
            <svg fill="#298dff" height="64" width="64" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 294.156 294.156" xml:space="preserve"><g stroke-width="0"/><g stroke-linecap="round" stroke-linejoin="round"/><path d="M227.002 108.256c-2.755-41.751-37.6-74.878-80.036-74.878-42.447 0-77.298 33.141-80.038 74.907C28.978 113.059 0 145.39 0 184.184c0 42.234 34.36 76.595 76.595 76.595h116.483a6 6 0 0 0 0-12H76.595C40.977 248.778 12 219.801 12 184.184c0-34.275 26.833-62.568 61.087-64.411a6 6 0 0 0 5.668-6.346c.09-37.536 30.654-68.049 68.211-68.049 37.563 0 68.132 30.518 68.211 68.063a6 6 0 0 0 5.687 6.321c34.37 1.741 61.292 30.038 61.292 64.421 0 19.526-8.698 37.801-23.864 50.138a6 6 0 0 0-.868 8.44 6 6 0 0 0 8.44.868c17.98-14.626 28.292-36.293 28.292-59.447 0-38.913-29.076-71.256-67.154-75.926"/><path d="M140.966 141.078v76.511a6 6 0 0 0 12 0v-76.511a6 6 0 0 0-12 0"/><path d="M181.283 152.204a6 6 0 0 0 4.243-10.242l-34.317-34.317a6 6 0 0 0-8.485 0l-34.317 34.317a6 6 0 0 0 8.485 8.485l30.074-30.074 30.074 30.074a6 6 0 0 0 4.243 1.757"/></svg>
            <p class="mt-3">{% trans 'Drag and drop the file within the dashed border for upload' %}</p>
        </div>
        <div class="row mb-2 mx-3">
            <div class="col-xs-12 col-sm-6 mb-1">
                <span
                    data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="{% trans 'Open the file Browser' %}"
                >
                    <div
                            class="btn btn-outline-primary btn-block"
                    >
                        <i class="fa-solid fa-computer"></i>
                        <input type="file" title="Click to add Files"/>
                        {% csrf_token %}
                    </div>
                </span>
            </div>
            <div class="col-xs-12 col-sm-6 mb-1">
                <span
                    data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="{% trans 'Open the file Cloud' %}"
                >
                    <button
                        type="button"
                        class="btn btn-outline-primary btn-block btn-select-cloud"
                        data-bs-toggle="modal" data-bs-target="#{{ id_modal }}"
                    >
                        <i class="fa-solid fa-server"></i>
                    </button>
                </span>
            </div>
        </div>
        <div class="row mx-3 mb-2" style="color: #2d27db;font-size: 0.8rem;">
            <div class="instruction-upload-file-text">

            </div>
            <script type="text/html" class="template-title-error-type">
                {% trans 'File upload type is not support.' %}
            </script>
            <script type="text/html" class="template-title-error-size">
                {% trans 'File upload size exceeds the limit.' %}
            </script>
            <script type="text/html" class="template-title-error-ext">
                {% trans 'File upload size exceeds the limit.' %}
            </script>
            <script type="text/html" class="template-data-error-type">
                <p class="p-0 m-0">
                    {% trans 'Allow uploading files of' %} %%fileaccept%%.
                </p>
            </script>
            <script type="text/html" class="template-data-error-size">
                <p class="p-0 m-0">
                    {% trans 'The file size must be smaller than' %} %%filesizelimit%%.
                </p>
            </script>
        </div>
    </div>
    <div class="min-h-40p pt-2 dm-uploader-results">
        {#        https://cdn-icons-png.flaticon.com/512/3135/3135715.png #}
        {#  li.item with plain text      #}
        <script type="text/html" class="pattern-file-text-plain">
            <li
                    class="dm-uploader-result-item align-items-center p-2 state-f-wait"
                    data-file-id="%%fileid%%"
                    data-file="%%filedata%%"
            >
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-6 d-flex justify-content-start">
                        <img
                                class="mr-3 mw-50p mh-50p img-filter-opacity-50" src="%%filecapture%%"
                                alt="Preview"
                        >
                        <div class="media-body mb-1">
                            <div class="row">
                                <div class="col-12 col-md-4 col-lg-4">
                                    <div class="d-flex">
                                        <p class="f-item-name">%%filename%%</p>
                                        <a
                                                class="file-preview-link ml-2"
                                                href="{% url 'AttachmentPreview' pk='__pk__' %}"
                                                target="_blank"
                                        >
                                            <i class="fa-solid fa-arrow-up-right-from-square fa-xs"></i>
                                        </a>
                                    </div>
                                    <span class="badge badge-sm text-dark-10 fs-8 bg-yellow-light-4 f-item-info">%%fileinfo%%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-6 d-flex justify-content-end align-items-center">
                        <button
                                type="button"
                                class="ml-auto btn btn-rounded btn-icon btn-percent-upload mr-1" disabled
                        ></button>
                        <div class="nav-pills-bfl" role="group" aria-label="Button group with nested dropdown">
                        <button
                                type="button"
                                class="btn nav-link btn-download-file"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="{% trans 'Download' %}"
                        >
                            <i class="fa-solid fa-download"></i>
                        </button>
                        <button
                                type="button"
                                class="btn nav-link btn-edit-attribute"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="{% trans 'Edit attributes' %}"
                        >
                            <i class="fa-solid fa-pen"></i>
                        </button>
                        <button
                                type="button"
                                class="btn nav-link btn-destroy-file"
                                data-bs-toggle="tooltip"
                                data-bs-placement="bottom"
                                title="{% trans 'Delete' %}"
                        >
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                        </div>
                    </div>
                </div>
            </li>
        </script>
        {#  -- li.item with plain text      #}

        <div class="dm-uploader-no-files" style="display: none;">
            <div class="d-flex justify-content-center">
                <small class="text-muted text-center empty">{% trans 'No files uploaded' %}.</small>
            </div>
        </div>
        <ul class="p-1 dm-uploader-result-list m-0" style="display: none;"></ul>
    </div>

    <div
            class="modal fade modal-file-cloud" id="{{ id_modal }}" tabindex="-1" role="dialog" aria-labelledby="{{ id_modal }}Label"
            aria-hidden="true"
    >
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans "Open the file Cloud" %}</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body overflow-y-auto overflow-x-hidden mh-50vh">
                    <table
                            class="table nowrap w-100 select-file-cloud"
                            data-url="{% url 'FilesUnusedAPI' %}"
                    >
                        <thead>
                        <tr>
                            <td>#</td>
                            <td>{% trans 'Name' %}</td>
                            <td>{% trans 'Size' %}</td>
                            <td>{% trans 'Remarks' %}</td>
                            <td>{% trans 'Date Created' %}</td>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer selected-file-cloud-group" style="display: none;">
                    <div class="selected-file-cloud d-flex justify-content-start w-100"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Close' %}</button>
                    <button type="button" class="btn btn-primary save-change-file-cloud" data-bs-dismiss="modal">{% trans 'Save' %}</button>
                </div>
            </div>
        </div>
    </div>
</div>
