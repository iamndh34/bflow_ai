var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,d,a){c instanceof String&&(c=String(c));for(var b=c.length,e=0;e<b;e++){var g=c[e];if(d.call(a,g,e,c))return{i:e,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,a){c!=Array.prototype&&c!=Object.prototype&&(c[d]=a.value)};$jscomp.getGlobal=function(c){c=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,c];for(var d=0;d<c.length;++d){var a=c[d];if(a&&a.Math==Math)return a}return globalThis};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,d,a,b){if(d){a=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var e=c[b];e in a||(a[e]={});a=a[e]}c=c[c.length-1];b=a[c];d=d(b);d!=b&&null!=d&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,a){return $jscomp.findInternal(this,c,a).v}},"es6","es3");
(function(c){var d=function(a,b){var e=this;this.opts=c.extend({},d.defaults,b);this.$formset=c(a);this.$emptyForm="[data-subformset-empty-form]"===this.opts.emptyForm?c(this.opts.emptyForm):this.$formset.find(this.opts.emptyForm);this.$body=this.$formset.find(this.opts.body);this.$add=this.$formset.find(this.opts.add);this.formsetPrefix=c(a).data(this.opts.prefix);this.addForm=c.proxy(this,"addForm");this.$add.click(this.addForm);this.$formset.on("formAdded formDeleted",this.opts.form,c.proxy(this,
"checkMaxForms"));this.$forms().each(function(a,b){c(b);e.bindForm(c(this),a)});this.prefillOrder();this.$formset.data("formset",this);c.each(["animateForms"],function(c,a){if(a in e.opts&&e.opts[a])e[a]()})};d.defaults={form:"[data-formset-form]",emptyForm:"script[type=form-template][data-formset-empty-form]",body:"[data-formset-body]",add:"[data-formset-add]",deleteButton:"[data-formset-delete]",moveUpButton:"[data-formset-move-up]",moveDownButton:"[data-formset-move-down]",hasMaxFormsClass:"has-max-forms",
animateForms:!0,reorderMode:"dom",prefix:"formset-prefix",empty_prefix:"__prefix__"};d.prototype.addForm=function(){if(this.hasMaxForms())throw Error("MAX_NUM_FORMS reached");var a=this.totalFormCount();this.$managementForm("TOTAL_FORMS").val(a+1);var b=this.$emptyForm.html().replace(new RegExp(this.opts.empty_prefix,"g"),a).replace(/<\\\/script>/g,"\x3c/script>");b=c(c.parseHTML(b,this.$body.document,!0));try{addNewOrderNumber(b,this.$body)}catch(e){}this.$body.append(b);b=b.filter(this.opts.form);
this.bindForm(b,a);b.find("[name="+(this.formsetPrefix+"-"+a)+"-ORDER]").val(a);b.attr("data-formset-created-at-runtime","true");b.find('input[type="text"], input[type="number"], select, textarea').addClass("form-control");b.find('input[type="checkbox"]').addClass("magic-checkbox");a=b.find("[data-ajax]");c.fn.renderFormElements(b);return b};d.prototype.bindForm=function(a,b){var e=this;b=this.formsetPrefix+"-"+b;a.data("formset__formPrefix",b);var d=a.find("[name="+
b+"-DELETE]"),f=a.find("[name="+b+"-ORDER]");b=function(){d.is(":checked")?(a.attr("data-formset-form-deleted",""),a.find(":required").data("formset-required-field",!0).prop("required",!1),a.find("input[pattern]").each(function(){var a=c(this).attr("pattern");c(this).data("formset-field-pattern",a).removeAttr("pattern")}),a.trigger("formDeleted")):(a.removeAttr("data-formset-form-deleted"),a.find("*").filter(function(){return!0===c(this).data("formset-required-field")}).prop("required",!0),a.find("input").each(function(){var a=
c(this).data("formset-field-pattern");a&&c(this).attr("pattern",a)}),a.trigger("formAdded"));e.reorderForms()};d.change(b);window.setTimeout(b);a.find(this.opts.deleteButton).bind("click",function(){d.attr("checked",!0).change()});f.change(function(a){e.reorderForms()});a.find(this.opts.moveUpButton).bind("click",function(){var a=f.val(),b=null;e.$activeForms().each(function(d,e){d=c(e).find("[name*=ORDER]");e=parseInt(d.val());e<a&&(null==b||e>parseInt(b.val()))&&(b=d)});null!=b&&(f.val(b.val()),
b.val(a));e.reorderForms()});a.find(this.opts.moveDownButton).bind("click",function(){var a=f.val(),b=null;e.$activeForms().each(function(d,e){d=c(e).find("[name*=ORDER]");e=parseInt(d.val());e>a&&(null==b||e<parseInt(b.val()))&&(b=d)});null!=b&&(f.val(b.val()),b.val(a));e.reorderForms()})};d.prototype.prefillOrder=function(){var a=this;this.$forms().each(function(b,d){var e=a.formsetPrefix+"-"+b;c(d).find("[name="+e+"-ORDER]").val(b)})};d.prototype.reorderForms=function(){var a=this,b=this.$activeForms().sort(function(a,
b){a=parseInt(c(a).find("[name*=-ORDER]").val());b=parseInt(c(b).find("[name*=-ORDER]").val());return a<b?-1:a>b?1:0});if("dom"===this.opts.reorderMode)b.reverse().each(function(d,e){try{customOrderField(e,b,d)}catch(h){}a.$body.prepend(c(e))});else if("animate"===this.opts.reorderMode){var d=0;"relative"!==this.$body.css("position")&&(this.$body.css("height",this.$body.outerHeight(!0)+"px"),this.$body.css("position","relative"),this.$activeForms().each(function(a,b){c(b).css("position","absolute");
c(b).css("top",d+"px");d+=c(b).outerHeight(!0)}),d=0);b.each(function(a,b){c(b).stop().animate({top:d+"px"},1E3);d+=c(b).outerHeight(!0)});this.$body.css("height",d+"px");window.setTimeout(function(){b.reverse().each(function(b,d){c(d).css("position","static");a.$body.prepend(c(d))});a.$body.css("position","static");a.$body.css("height","auto")},1E3)}};d.prototype.$forms=function(){return this.$body.find(this.opts.form)};d.prototype.$activeForms=function(){return this.$body.find(this.opts.form).not("[data-formset-form-deleted]")};
d.prototype.$managementForm=function(a){return c("[name="+this.formsetPrefix+"-"+a+"]")};d.prototype.totalFormCount=function(){var a=this,b=0;c("[data-"+this.opts.prefix+'="'+this.formsetPrefix+'"]').each(function(){b+=c(this).find(a.opts.body).find(a.opts.form).length});return b};d.prototype.deletedFormCount=function(){return this.$forms().filter("[data-formset-form-deleted]").length};d.prototype.activeFormCount=function(){return this.totalFormCount()-this.deletedFormCount()};d.prototype.hasMaxForms=
function(){var a=parseInt(this.$managementForm("MAX_NUM_FORMS").val(),10)||1E3;return this.activeFormCount()>=a};d.prototype.checkMaxForms=function(){this.hasMaxForms()?(this.$formset.addClass(this.opts.hasMaxFormsClass),this.$add.hide()):(this.$formset.removeClass(this.opts.hasMaxFormsClass),this.$add.show());return!1};d.prototype.animateForms=function(){this.$formset.on("formAdded",this.opts.form,function(){var a=c(this);"true"===a.attr("data-formset-created-at-runtime")&&(a.slideUp(0),a.slideDown(0));
try{jQuery.fn.formsetAddActions(a)}catch(b){}return!1}).on("formDeleted",this.opts.form,function(){var a=c(this);a.slideUp(0);try{jQuery.fn.formsetDeleteActions(a)}catch(b){}return!1});this.$forms().filter("[data-formset-form-deleted]").slideUp(0)};d.getOrCreate=function(a,b){var e=c(a).data("formset");e||(e=new d(a,b));return e};c.fn.formset=function(){if(0===arguments.length||1===arguments.length&&"string"!==c.type(arguments[0])){var a=arguments[0];return this.each(function(){return d.getOrCreate(this,
a)})}var b=arguments[0];var e=c.makeArray(arguments).slice(1);if(b in d)return e.unshift(this),d[b].apply(d,e);throw Error("Unknown function call "+b+" for $.fn.formset");};c.fn.reverse=[].reverse})(jQuery);
